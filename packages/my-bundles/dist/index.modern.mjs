import e,{useState as t,useMemo as a,Fragment as n}from"react";import{useTable as r,useSortBy as l}from"react-table";import{Dropdown as o}from"react-bootstrap";import*as c from"xlsx";function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s.apply(null,arguments)}const m=[{Id:1,Name:"John Doe",Age:28,Country:"USA"},{Id:2,Name:"Jane Smith",Age:34,Country:"Canada"},{Id:3,Name:"Alice Johnson",Age:45,Country:"UK"},{Id:4,Name:"Bob Brown",Age:23,Country:"Australia"}],d=()=>{const[d,i]=t([]),[u,p]=t([]),[b,h]=t(m),[g,f]=t("json"),E=()=>{if(d.length===b.length)i([]),p([]);else{const e=b.map(e=>e.Id);i(e),p(b)}},y=a(()=>[{Header:()=>/*#__PURE__*/e.createElement("button",{onClick:E,className:"custom-btn2"},/*#__PURE__*/e.createElement("b",null,"Select")),accessor:"select",Cell:({row:t})=>/*#__PURE__*/e.createElement("input",{type:"checkbox",checked:d.includes(t.original.Id),onChange:()=>(e=>{const t=e.original.Id;i(e=>{const a=e.includes(t)?e.filter(e=>e!==t):[...e,t],n=b.filter(e=>a.includes(e.Id));return p(n),a})})(t)}),disableSortBy:!0},{Header:"Identity",accessor:"Id"},{Header:"Name",accessor:"Name"},{Header:"Age",accessor:"Age"},{Header:"Country",accessor:"Country"}],[b,d]),{getTableProps:C,getTableBodyProps:x,headerGroups:N,rows:w,prepareRow:k}=r({columns:y,data:b},l),j=e=>{f(e),(e=>{let t,a;const n=N[0].headers.filter(e=>null!==e.Header&&"string"==typeof e.Header).map(e=>e.Header);if("json"===e)t=JSON.stringify(b,null,2),a=new Blob([t],{type:"application/json"});else if("text"===e)t=[n.join(", "),...b.map(e=>Object.values(e).join(", "))].join("\n"),a=new Blob([t],{type:"text/plain"});else if("xlsx"===e){const e=b.map(e=>{const t={};return n.forEach((a,n)=>{t[a]=Object.values(e)[n]}),t}),t=c.utils.json_to_sheet(e,{header:n}),r=c.utils.book_new();c.utils.book_append_sheet(r,t,"Sheet1");const l=c.write(r,{bookType:"xlsx",type:"binary"}),o=new ArrayBuffer(l.length),s=new Uint8Array(o);for(let e=0;e<l.length;e++)s[e]=255&l.charCodeAt(e);a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})}const r=window.URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=`table-data.${e}`,document.body.appendChild(l),l.click(),document.body.removeChild(l)})(e)};/*#__PURE__*/return e.createElement(n,null,/*#__PURE__*/e.createElement("div",{className:"d-flex justify-content-center mb-3"},/*#__PURE__*/e.createElement("button",{onClick:()=>h(m),className:"custom-btn"},"Fetch Data"),/*#__PURE__*/e.createElement("button",{onClick:()=>{},className:"custom-btn3"},"Delete"),/*#__PURE__*/e.createElement("button",{onClick:()=>{},className:"custom-btn"},"Add Data")),/*#__PURE__*/e.createElement("div",{className:"container mt-4"},/*#__PURE__*/e.createElement("b",null,"Download"),/*#__PURE__*/e.createElement(o,null,/*#__PURE__*/e.createElement(o.Toggle,{variant:"success",id:"dropdown-basic"},g.toUpperCase()||"Select Format"),/*#__PURE__*/e.createElement(o.Menu,null,/*#__PURE__*/e.createElement(o.Item,{onClick:()=>j("json")},"JSON"),/*#__PURE__*/e.createElement(o.Item,{onClick:()=>j("text")},"Text"),/*#__PURE__*/e.createElement(o.Item,{onClick:()=>j("xlsx")},"Excel")))),/*#__PURE__*/e.createElement("div",{className:"table-container"},/*#__PURE__*/e.createElement("table",s({},C(),{className:"table table-bordered table-dark"}),/*#__PURE__*/e.createElement("thead",{className:"thead-dark"},N.map(t=>/*#__PURE__*/e.createElement("tr",t.getHeaderGroupProps(),t.headers.map(t=>/*#__PURE__*/e.createElement("th",s({},t.getHeaderProps(t.getSortByToggleProps()),{className:"text-center"}),t.render("Header"),/*#__PURE__*/e.createElement("span",null,t.isSorted?t.isSortedDesc?" ðŸ”½":" ðŸ”¼":"")))))),/*#__PURE__*/e.createElement("tbody",x(),w.map(t=>(k(t),/*#__PURE__*/e.createElement("tr",t.getRowProps(),t.cells.map(t=>/*#__PURE__*/e.createElement("td",s({},t.getCellProps(),{className:"text-center"}),t.render("Cell"))))))))))};export{d as default};
